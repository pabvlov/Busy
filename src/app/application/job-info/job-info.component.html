<ng-container *ngIf="empleador.rut != 0;then loaded; else loading"></ng-container>
<ng-template #loaded>
    <div class="container" id="information" *ngIf="!isViewingMap">
        <h3 class="title text-busy">{{ job.titulo }}</h3>
        <p class="description">
            {{ job.descripcion }}
        </p>
        <table class="table">
            <thead class="color-busy">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Datos</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">Precio</th>
                    <td>{{ job.precio | currency:'CLP$ ':'symbol':'1.0-0' }}</td>
                </tr>
                <tr>
                    <th scope="row">Cantidad de Personas</th>
                    <td>{{ job.cantidad_personas }}</td>
                </tr>
                <tr>
                    <th scope="row">Ubicación</th>
                    <td>{{ empleador.direccion }} — <button class="btn transparent" (click)="viewMap()">Ver Mapa</button>
                    </td>
                </tr>
                <tr>
                    <th scope="row">Fecha de Publicación</th>
                    <td>{{ job.fecha_publicacion | date: 'dd/MM/yyyy' }} — <span class="italic text-busy">{{
                            dateDiff(job.fecha_publicacion) }}</span></td>
                </tr>
                <tr>
                    <th scope="row">Fecha de Selección</th>
                    <td>{{ job.fecha_seleccion_postulante | date: 'dd/MM/yyyy' }} — <span class="italic text-busy">{{
                            dateDiff(job.fecha_seleccion_postulante) }}</span></td>
                </tr>
                <tr>
                    <th scope="row">Fecha de Término</th>
                    <td>{{ job.fecha_finalizacion | date: 'dd/MM/yyyy' }} — <span class="italic text-busy">{{
                            dateDiff(job.fecha_finalizacion) }}</span></td>
                </tr>
                <tr>
                    <th scope="row">Empleador</th>
                    <td>{{ empleador.nombres }} {{ empleador.apellidos }}</td>
                </tr>
            </tbody>
        </table>
        <div class="postular">
            <button class="btn btn-block btn-busy">Postular</button>
        </div>
    </div>
    
    <div id="information" *ngIf="isViewingMap">
        <button class="btn transparent" (click)="viewMap()">
            <span class="material-symbols-outlined">
                arrow_back
            </span>
        </button>
        <div class="card">
            <div class="card-body">
                <iframe style="border:0" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade"
                    [src]="(mapskey + getUbicacion()) | safe">
                </iframe>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #loading>
    <div class="container loading">
        <div class="spinner-border text-busy" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
</ng-template>